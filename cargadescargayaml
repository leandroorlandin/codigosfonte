import jsonschema
import ruamel.yaml as yaml

def resolve_references(file_path):
    with open(file_path, 'r') as file:
        data = yaml.safe_load(file)

    resolver = jsonschema.RefResolver.from_schema(data, store={})
    resolved_data = resolver.resolve(data)

    return resolved_data

input_file = 'openAPI.yaml'
output_file = 'openAPI-compiled.yaml'

resolved_data = resolve_references(input_file)

with open(output_file, 'w') as file:
    yaml.dump(resolved_data, file)

