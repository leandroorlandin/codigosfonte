from ruamel.yaml import YAML

def resolve_references(yaml_data):
    yaml = YAML(typ="safe")
    return yaml.load(yaml_data)

def process_openapi(input_file, output_file):
    yaml = YAML(typ="safe")
    with open(input_file, "r") as f:
        yaml_data = f.read()
    
    resolved_data = resolve_references(yaml_data)
    
    with open(output_file, "w") as f:
        yaml.dump(resolved_data, f)

input_file = "openAPI.yaml"
output_file = "openAPI-compiled.yaml"

process_openapi(input_file, output_file)

